!function t(r,e,i){function n(s,a){if(!e[s]){if(!r[s]){var h="function"==typeof require&&require;if(!a&&h)return h(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=e[s]={exports:{}};r[s][0].call(c.exports,function(t){var e=r[s][1][t];return n(e?e:t)},c,c.exports,t,r,e,i)}return e[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)n(i[s]);return n}({1:[function(t,r,e){var i,n,o,s,a;a=t("./util").Util,s=t("./stage").Stage,n=t("./event").Event,o=t("./event").EventProducer,r.exports.Canvas=i=function(){function t(t){if(this.raw=t,"string"==typeof this.raw&&(this.raw=a.$one(this.raw)),!this.raw)throw new Error("deformed dom");this.ctx=this.raw.getContext("2d"),this.constructor.isHighDPI&&this.enableHighDPI(),this.eventProducer=new o(this),this.currentStage=null,this.bindMouseEvent()}return t.devicePixelRatio=window.devicePixelRatio,t.isHighDPI=t.devicePixelRatio>1,t.prototype.enableHighDPI=function(){var t,r;return r=this.raw.width,t=this.raw.height,this.raw.width=r*this.constructor.devicePixelRatio,this.raw.height=t*this.constructor.devicePixelRatio,this.raw.style.width=r+"px",this.raw.style.height=t+"px",this.ctx.scale(this.constructor.devicePixelRatio,this.constructor.devicePixelRatio)},t.prototype.bindMouseEvent=function(){return this.raw.addEventListener("click",function(t){return function(r){if(r=new n("click",r),r.x=r.data.offsetX*t.constructor.devicePixelRatio,r.y=r.data.offsetY*t.constructor.devicePixelRatio,r.x>=0&&r.y>=0)return t.fire("click",r)}}(this))},t.prototype.clear=function(){this.ctx.clearRect(0,0,this.raw.width,this.raw.height)},t.prototype.newStage=function(){var t;return t=new s(this)},t.prototype.on=function(t,r){return this.eventProducer.on(t,r),this},t.prototype.off=function(t,r){return this.eventProducer.off(t,r),this},t.prototype.fire=function(t,r){return this.eventProducer.fire(t,r),this},t.prototype.hasEvent=function(t){return this.eventProducer.has(t)},t}()},{"./event":2,"./stage":8,"./util":10}],2:[function(t,r,e){var i,n,o;o=t("./util").Util,r.exports.Event=i=function(){function t(t,r){this.name=t,this.data=r}return t}(),r.exports.EventProducer=n=function(){function t(t){this.context=t,this.listeners={}}return t.prototype.on=function(t,r){var e;return"function"!=typeof r?this:(e=this.listeners[t],void 0===e&&(e=this.listeners[t]=[]),e.indexOf(r)===-1&&e.push(r),this)},t.prototype.has=function(t){var r;return(null!=(r=this.listeners[t])?r.length:void 0)>0},t.prototype.off=function(t,r){return void 0===r?this.listeners[t]=[]:o.aRemoveEqual(this.listener[t],r),this},t.prototype.listenersOf=function(t){var r;return r=this.listeners[t],null!=r?r:[]},t.prototype.fire=function(t,r){var e,i,n,o;if(o=this.listeners[t],void 0===o)return this;for(e=0,i=o.length;e<i;e++)n=o[e],n.call(this.context,r);return this},t}()},{"./util":10}],3:[function(t,r,e){var i;r.exports.IDGenerator=i=function(){function t(t){this.seed=null!=t?t:0}return t.prototype.id=function(){return this.seed++},t.prototype.reset=function(t){this.seed=null!=t?t:0},t}()},{}],4:[function(t,r,e){var i,n,o,s;i=t("./event").EventProducer,s=t("./util").Util,o=t("./rect").Rect,r.exports.Layer=n=function(){function t(t,r,e,n){this.id=-1,this.positionX=0,this.positionY=0,this.frame=new o(t,r,e,n),this.bounds=new o(0,0,e,n),this.maskToBounds=!1,this.rotate=0,this.borderWidth=0,this.borderColor="#000",this.borderDirection=this.constructor.BORDER_DIRECTION.ALL,this.borderSemiMinorAxes=0,this.borderSemiMajorAxes=0,this.backgroundColor=null,this.eventProducer=new i(this),this.parent=null,this.children=[],this.stage=null,this.ctx=null,this.capturedTransform=null}return t.BORDER_DIRECTION={TOP:1,RIGHT:2,BOTTOM:4,LEFT:8,ALL:15},t.prototype._calculatePosition=function(){return null!==this.parent?(this.positionX=this.parent.positionX+this.parent.bounds.origin.x+this.frame.origin.x,this.positionY=this.parent.positionY+this.parent.bounds.origin.y+this.frame.origin.y):(this.positionX=this.frame.origin.x,this.positionY=this.frame.origin.y)},t.prototype._applyRotate=function(){var t,r;if(0!==this.rotate)return t=this.positionX+this.frame.size.width/2,r=this.positionY+this.frame.size.height/2,this.ctx.translate(t,r),this.ctx.rotate(this.rotate*Math.PI/180),this.ctx.translate(-t,-r)},t.prototype._drawPredefined=function(){return this.ctx.beginPath(),this._calculatePosition(),this._applyRotate(),this.capturedTransform=this.ctx.getTransform(),this.ctx.beginPath(),this.ctx.rect(this.positionX,this.positionY,this.frame.size.width,this.frame.size.height),null!==this.backgroundColor&&(this.ctx.fillStyle=this.backgroundColor,this.ctx.fill()),this.borderWidth>0&&(this.ctx.strokeStyle=this.borderColor,this.ctx.stroke()),this.ctx.closePath()},t.prototype._drawChildren=function(){var t,r,e,i,n;for(i=this.children,n=[],r=0,e=i.length;r<e;r++)t=i[r],t.stage=this.stage,t.ctx=this.ctx,n.push(t.draw());return n},t.prototype.drawing=function(){},t.prototype.draw=function(){return null===this.ctx?this:(this.id=this.stage.idGenerator.id(),this.ctx.save(),this._drawPredefined(),this.drawing(),this._drawChildren(),this.ctx.restore(),this)},t.prototype.redraw=function(){if(null!==this.stage)return this.stage.redraw()},t.prototype.setRotate=function(t){return this.rotate=t,this.redraw()},t.prototype.setBackgroundColor=function(t){return this.backgroundColor=t,this.redraw()},t.prototype.setBorderWidth=function(t){return this.borderWidth=t,this.redraw()},t.prototype.addChild=function(t){return t.parent=this,this.children.push(t),this.redraw(),this},t.prototype.addChildBefore=function(t,r){return t.parent=this,s.aInsertBefore(this.children,t,r),this.redraw(),this},t.prototype.addChildAfter=function(t,r){return t.parent=this,s.aInsertAfter(this.children,t,r),this.redraw(),this},t.prototype.removeChild=function(t){return s.aRemoveEqual(this.children,t),this.redraw(),this},t.prototype.clearChildren=function(){return this.children=[],this.redraw(),this},t.prototype.containPoint=function(t,r){var e;return null!==this.ctx&&(this.ctx.save(),this.ctx.setTransform(this.capturedTransform.a,this.capturedTransform.b,this.capturedTransform.c,this.capturedTransform.d,this.capturedTransform.e,this.capturedTransform.f),this._calculatePosition(),this.ctx.beginPath(),this.ctx.rect(this.positionX,this.positionY,this.frame.size.width,this.frame.size.height),e=this.ctx.isPointInPath(t,r),this.ctx.closePath(),this.ctx.restore(),e)},t.prototype.on=function(t,r){return this.eventProducer.on(t,r),this},t.prototype.off=function(t,r){return this.eventProducer.off(t,r),this},t.prototype.fire=function(t,r){return this.eventProducer.fire(t,r),this},t.prototype.hasEvent=function(t){return this.eventProducer.has(t)},t.prototype.listenersOf=function(t){return this.eventProducer.listenersOf(t)},t}()},{"./event":2,"./rect":7,"./util":10}],5:[function(t,r,e){if(void 0===CanvasRenderingContext2D)throw new Error("browser does not support canvas");if(void 0!==window.brownie)throw new Error("namespace 'brownie' has been used by other code");t("./transform"),window.brownie={Util:t("./util").Util,Canvas:t("./canvas").Canvas,Rect:t("./rect").Rect,Layer:t("./layer").Layer}},{"./canvas":1,"./layer":4,"./rect":7,"./transform":9,"./util":10}],6:[function(t,r,e){var i;r.exports.Matrix=i=function(){function t(t,r,e,i,n,o){this.a=null!=t?t:1,this.b=null!=r?r:0,this.c=null!=e?e:0,this.d=null!=i?i:1,this.e=null!=n?n:0,this.f=null!=o?o:0}return t.multiply=function(r,e){return new t(r.a*e.a+r.c*e.b,r.b*e.a+r.d*e.b,r.a*e.c+r.c*e.b,r.b*e.c+r.d*e.d,r.a*e.e+r.c*e.f+r.e,r.b*e.e+r.d*e.f+r.f)},t.prototype.set=function(t,r,e,i,n,o){this.a=null!=t?t:1,this.b=null!=r?r:0,this.c=null!=e?e:0,this.d=null!=i?i:1,this.e=null!=n?n:0,this.f=null!=o?o:0},t.prototype.multiply=function(t){return this.constructor.multiply(this,t)},t}()},{}],7:[function(t,r,e){var i;r.exports.Rect=i=function(){function t(t,r,e,i){null==t&&(t=0),null==r&&(r=0),null==e&&(e=0),null==i&&(i=0),this.origin={x:t,y:r},this.size={width:e,height:i}}return t}()},{}],8:[function(t,r,e){var i,n,o;o=t("./util").Util,i=t("./id").IDGenerator,r.exports.Stage=n=function(){function t(t){if(this.canvas=t,null==this.canvas)throw new Error("must specify a canvas");this.bindEvent(),this.layers=[],this.idGenerator=new i}return t.prototype.addLayer=function(t){return this.layers.push(t),this.redraw(),this},t.prototype.addLayerBefore=function(t,r){return o.aInsertBefore(this.layers,t,r),this.redraw(),this},t.prototype.addLayerAfter=function(t,r){return o.aInsertAfter(this.layers,t,r),this.redraw(),this},t.prototype.removeLayer=function(t){return o.aRemoveEqual(this.layers,t),this.redraw(),this},t.prototype.clearLayers=function(){return this.layers=[],this.redraw(),this},t.prototype.bindEvent=function(){return this.canvas.on("click",function(t){return function(r){return t.broadcastMouseEvent(r)}}(this))},t.prototype._walkLayers=function(t,r,e){var i,n,o,s;if(null==e&&(e=0),!(e>100)){for(s=[],i=0,o=t.length;i<o;i++)n=t[i],r(n,e),n.children.length>0?s.push(this._walkLayers(n.children,r,e++)):s.push(void 0);return s}},t.prototype.walkLayers=function(t){return this._walkLayers(this.layers,t)},t.prototype.broadcastMouseEvent=function(t){var r;return r=[],this.walkLayers(function(e){if(e.containPoint(t.x,t.y))return r.push(e)}),r.sort(function(t,r){return r.id-t.id}),r.every(function(r){var e,i;return i=r.listenersOf(t.name),e=!1,i.forEach(function(i){var n;return e=null!=(n=i.call(r,t.name,t))&&n}),e!==!1})},t.prototype._draw=function(){var t,r,e,i,n;for(i=this.layers,n=[],t=0,e=i.length;t<e;t++)r=i[t],r.stage=this,r.ctx=this.canvas.ctx,n.push(r.draw());return n},t.prototype.redraw=function(){return this.canvas.clear(),this.canvas.currentStage=this,this.idGenerator.reset(),this._draw(),this},t}()},{"./id":3,"./util":10}],9:[function(t,r,e){var i,n,o,s,a,h,u,c,l,f,p;i=t("./matrix").Matrix,p=Math.sin,u=Math.cos,f=CanvasRenderingContext2D.prototype,c="currentTransform"in f,l="mozCurrentTransform"in f,c||l?f.getTransform=function(){return void 0!==c?function(){return this.currentTransform}:function(){return this.mozCurrentTransform}}():(n=f.rotate,o=f.scale,s=f.setTransform,h=f.translate,a=f.transform,f.currentTransform=new i,f.setTransform=function(t,r,e,i,n,o){s.call(this,t,r,e,i,n,o),this.currentTransform.set(t,r,e,i,n,o)},f.rotate=function(t){var r;r=new i(u(t),p(t),(-p(t)),u(t),0,0),this.currentTransform=this.currentTransform.multiply(r),n.call(this,t)},f.scale=function(t,r){var e;e=new i(t,0,0,r,0,0),this.currentTransform=this.currentTransform.multiply(e),o.call(this,t,r)},f.translate=function(t,r){var e;e=new i(0,0,0,0,t,r),this.currentTransform=this.currentTransform.multiply(e),h.call(this,t,r)},f.transform=function(t,r,e,n,o,s){var h;h=new i(t,r,e,n,o,s),this.currentTransform=this.currentTransform.multiply(h),a.call(this,t,r,e,n,o,s)},f.getTransform=function(){return this.currentTransform})},{"./matrix":6}],10:[function(t,r,e){var i;r.exports.Util=i=function(){function t(){}return t.type=function(t){return Object.prototype.toString.call(t)},t.isString=function(t){return"string"==typeof t},t.isObject=function(t){return"object"==typeof t&&null!==t},t.toArray=function(t){return Array.prototype.slice.call(t)},t.$one=function(t){return document.querySelector(t)},t.$all=function(t){return this.toArray(document.querySelectorAll(t))},t.aRemoveEqual=function(t,r){var e,i,n,o;for(e=n=0,o=t.length;n<o;e=++n)if(i=t[e],i===r)return void t.splice(e,1)},t.aInsertAfter=function(t,r,e){var i,n,o,s;for(i=o=0,s=t.length;o<s;i=++o)if(n=t[i],n===e)return void t.splice(i+1,0,r)},t.aInsertBefore=function(t,r,e){var i,n,o,s;for(i=o=0,s=t.length;o<s;i=++o)if(n=t[i],n===e)return void t.splice(i,0,r)},t}()},{}]},{},[5]);
//# sourceMappingURL=brownie.min.js.map
